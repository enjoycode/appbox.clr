{
    "Code": "var e={},t=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var h=e.length-1;h>=0;h--)(i=e[h])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};e.__esModule=!0;var n=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodes=[],t.checking=!1,t.treeProps={label:\"Name\",children:\"Childs\"},t}return t(n,e),n.prototype.onOrgUnitChanged=function(e){if(this.orgunit){this.checking=!0;for(var t=0;t<this.nodes.length;t++)this.loopCheckNodes(this.nodes[t]);this.$nextTick(function(){this.checking=!1})}},n.prototype.loopCheckNodes=function(e){if(e.OrgUnits){for(var t=this.orgunit;t;){for(o=0;o<e.OrgUnits.length;o++)if(t.Id===e.OrgUnits[o])return void this.$refs.tree.setChecked(e.Id,!0);t=t.Parent}this.$refs.tree.setChecked(e.Id,!1)}else if(e.Childs)for(var o=0;o<e.Childs.length;o++)this.loopCheckNodes(e.Childs[o])},n.prototype.onCheckChanged=function(e,t){!this.checking&&this.orgunit&&e.OrgUnits&&(t?(this.loopRemoveChildPermission(this.orgunit,e),e.OrgUnits.push(this.orgunit.Id)):this.loopDemotion(this.orgunit,e),this.savePermission(e))},n.prototype.loopRemoveChildPermission=function(e,t){var o=e.Childs;if(o)for(var n=0;n<o.length;n++){var i=t.OrgUnits.indexOf(o[n].Id);-1!=i&&t.OrgUnits.splice(i,1),this.loopRemoveChildPermission(o[n],t)}},n.prototype.loopDemotion=function(e,t){var o=t.OrgUnits.indexOf(e.Id);if(-1!=o)t.OrgUnits.splice(o,1);else{var n=e.Parent;if(n){for(var i=n.Childs,r=0;r<i.length;r++)i[r].Id!=e.Id&&t.OrgUnits.push(i[r].Id);this.loopDemotion(n,t)}}},n.prototype.savePermission=function(e){var t=this;$runtime.channel.invoke(\"sys.AdminService.SavePermission\",[e.Id,e.OrgUnits]).catch(function(e){t.$message.error(e)})},n.prototype.mounted=function(){var e=this;$runtime.channel.invoke(\"sys.AdminService.LoadPermissionNodes\",[]).then(function(t){e.nodes=t})},o([Prop({default:null})],n.prototype,\"orgunit\"),o([Watch(\"orgunit\")],n.prototype,\"onOrgUnitChanged\"),n=o([Component],n)}(Vue);return e.default=n,e.default.options.render=function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"el-tree\",{ref:\"tree\",staticClass:\"tree\",attrs:{data:e.nodes,props:e.treeProps,\"node-key\":\"Id\",\"show-checkbox\":\"\"},on:{\"check-change\":e.onCheckChanged}})},e.default.options.staticRenderFns=[],e.default.options._scopeId=\"data-v-7018ae18\",e.default;",
    "Style": ".tree[data-v-7018ae18] {border: none}"
}